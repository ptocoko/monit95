<h2>РСУР: Создание отчета по семинару</h2>
<hr />
<div class="center-block" *ngIf="!isSending">
    <form (ngSubmit)="send()" [formGroup]="reportForm" novalidate>
        <div class="panel panel-default panel-width">
            <div class="panel-heading">1. Добавить фотографии</div>
            <div class="panel-default">
                <div style="width:50%; margin-left:10px">
                    <table class="table table-bordered" style="margin-top:10px">
                        <tr *ngFor="let image of images">
                            <td>{{image.name}}</td>
                            <td><a class="glyphicon glyphicon-trash" style="cursor:pointer" (click)="deletePhoto(image)"></a></td>
                        </tr>
                    </table>
                    <p *ngIf="images.length == 0" class="alert alert-danger">
                        фотографии не добавлены
                    </p>
                    <button type="button" style="margin-bottom:10px; margin-left:auto" class="fileUploader btn btn-default" [disabled]="images.length >= 4">
                        Добавить фото...
                        <input type="file" class="form-control" multiple accept=".png, .jpg, .jpeg" (change)="addPhoto($event)" title="Добавить фото..." [disabled]="images.length >= 4" />
                    </button>
                </div>
            </div>
        </div>
        <br />
        <div class="panel panel-default panel-width">
            <div class="panel-heading">2. Добавить описание</div>
            <div class="panel-body">
                <textarea placeholder="описание не добавлено" rows="10" style="width:600px" class="form-control" formControlName="protocolText"></textarea>
                <div style="width:600px" class="alert alert-danger" *ngIf="!reportForm.controls['protocolText'].valid && reportForm.controls['protocolText'].touched">
                    <div *ngIf="reportForm.controls['protocolText'].errors.required">Описание обязательно</div>
                    <div *ngIf="reportForm.controls['protocolText'].errors.textMinLengthWithoutSpaces">Текст должен состоять минимум из 100 символов</div>
                    <div *ngIf="reportForm.controls['protocolText'].errors.maxlength">Текст должен состоять максимум из 1000 символов</div>
                </div>
            </div>
        </div>
        <br />
        <div class="pull-left" style="clear: both">
            <button type="submit" class="btn btn-success">Создать</button>
            <button type="button" class="btn btn-danger" (click)="cancel()">Отмена</button>
        </div>
    </form>
</div>
<div *ngIf="isSending">
    <h3 class="text-center">Отправка формы...</h3>
    <img style="margin-top:20px" height="100" class="center-block" src="/progress.gif" />
</div>